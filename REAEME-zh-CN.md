ç®€ä½“ä¸­æ–‡ | [English](./README.md)

# image-preview
ä¸€æ¬¾é¢å‘ç§»åŠ¨web appçš„å›¾ç‰‡é¢„è§ˆæ’ä»¶.
### ç‰¹ç‚¹:
1. ğŸ‰ æ”¯æŒç»å¤§éƒ¨åˆ†æ‰‹åŠ¿æ“ä½œ.
2. ğŸƒ æ—‹è½¬ã€ç¼©æ”¾å›¾ç‰‡.
3. ğŸ“ å›¾ç‰‡é»˜è®¤æ‡’åŠ è½½.
4. ğŸ‚ åŸºäºwebgl.
5. â˜„ğŸŒ° 3D è§†å›¾.
<img width="375" alt="image" src="https://user-images.githubusercontent.com/23512886/223669339-d884340f-1976-4483-81c2-983c7290264e.png">
   
### ç”¨æ³•
æœ‰ä¸¤ç§:
#### 1. å¤åˆ¶releaseç›®å½•
*  `release/image-preview` ç›®å½•ä¸‹ç¼–è¯‘äº†é€‚é…ä¸åŒæ¨¡å—ç³»ç»Ÿçš„ç‰ˆæœ¬ , åŒ…æ‹¬ AMD,CommonJS,ES6,UMD,IIFE. ä½ å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±çš„ä¸€ä¸ª.
#### 2.ä¸‹è½½æ•´ä¸ªé¡¹ç›®:
* å…‹éš†ä¸‹æ¥ ,ç„¶åè·‘å‘½ä»¤ `npm i & npm run build`
* å¯¹äºä¸åŒçš„æ¨¡å—ç³»ç»Ÿ:
* `release/image-preview` ç›®å½•ä¸‹ç¼–è¯‘äº†é€‚é…ä¸åŒæ¨¡å—ç³»ç»Ÿçš„ç‰ˆæœ¬ , åŒ…æ‹¬ AMD,CommonJS,ES6,UMD,IIFE. ä½ å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±çš„ä¸€ä¸ª.


### å¼•å…¥ 
  * script (in iife or umd module system,use namespace imagePreviewModule):
    ``` html
    <script src="js/image-preview-iife.js">
    <script>
      new imagePreviewModule.ImagePreview({
        // something same with below usage
      })
    </script>
    ```
  * esmodule:
    ```javascript
     import {ImagePreview} from 'js/image-preview-esm.js'
    ```
    å¦‚æœç”±npmå®‰è£…ï¼š
    ```javascript
     import {ImagePreview} from '@daxiazilong/image-preview'
    ```
#### ç”¨æ³•:
html:
```html
  <div class="imageWraper">
    <img data-src="/images/IMG_0512.JPG" src="/images/IMG_0512.JPG">
    <img data-src="/images/main_body3.png" src="/images/main_body3.png">
  </div>
```
javascript:
``` javascript
//ç¬¬ä¸€ç§ç”Ÿæˆæ–¹æ³•:
let imgObj = new ImagePreview({
  selector:`.imageWraper img`
})
//ç¬¬äºŒç§ç”Ÿæˆæ–¹æ³•:
let imgObj =  new ImagePreview({
  imgs:[
    'imgsrc',
    'imgsrc',
    'imgsrc'
  ]
})
//then show n-th picture,use
imgObj.show(n);

// Distroy image preview instance. Remove HTML generated by this ImagePreview instance and other resources. For better performance, then you can set imgObj = null;
imgObj.destroy();

```
ä¸Šé¢çš„ä»£ç å±•ç¤ºäº†ç”Ÿæˆimage previewå®ä¾‹çš„ä¸¤ç§æ–¹æ³•, ç¬¬ä¸€ç§æ–¹æ³•ä¼šåœ¨ç»™å®šçš„HTMLå…ƒç´ ä¸Šè‡ªåŠ¨ç»‘å®šç‚¹å‡»äº‹ä»¶, è€Œç¬¬äºŒç§åˆ™éœ€è¦è‡ªå·±æ‰‹åŠ¨ç»‘å®šè§¦å‘äº‹ä»¶. å®é™…ä¸Š, è¿™æ˜¯å¾ˆç®€å•çš„, ä½ åªéœ€è¦åœ¨ä½ ä»£ç éœ€è¦æ‰“å¼€image previewçš„åœ°æ–¹è°ƒç”¨ `imgObj.show(n)` å°±å¥½.

#### ä¸vueä¸€èµ·ä½¿ç”¨:
HTML:
```HTML
<div
    v-for="(item, index) in imgs"
    :key="index"
    @click="showImg(index)"
>
    {{index}}
</div>
```
JS:
```javascript
import {ImagePreview} from '@daxiazilong/image-preview'
export default {
    data () {
        return {
            imgs: [
                'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201909%2F30%2F20190930192812_ZdJUw.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629013294&t=0fefdbd28f9926ff195325bd9d2bd4a9',
                'https://iknow-pic.cdn.bcebos.com/9213b07eca806538184ec36695dda144ad34821a',
                'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farchive%2F1e93e74fb4b87734fb11bc487f9d7e2e9ce666f2.jpg&refer=http%3A%2F%2Fi0.hdslb.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629028767&t=83072eef6345c4169751cef753b79bd7',
                'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fp.ssl.qhimg.com%2Ft017bbc635928363c05.jpg&refer=http%3A%2F%2Fp.ssl.qhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629274751&t=89d2696d8027df24bb767e6acb5330ac',
                'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Ff.mgame.netease.com%2Fforum%2F201509%2F21%2F171337o26avxzpb6wpowza.gif&refer=http%3A%2F%2Ff.mgame.netease.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1628907951&t=85efd61fe8604d1fb018b1555e23d316',
            ],
        }
    },
    // for vue3,  vue2.x is [beforeDestroy](https://cn.vuejs.org/v2/api/#beforeDestroy)
    beforeUnmount () {
        if (this.imgPreview) {
            this.imgPreview.destroy();
        }
    },
    methods: {
        showImg(index: any) {
            if (!this.imgPreview) {
                this.imgPreview = new ImagePreview({
                    imgs: [
                        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201909%2F30%2F20190930192812_ZdJUw.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629013294&t=0fefdbd28f9926ff195325bd9d2bd4a9',
                        'https://iknow-pic.cdn.bcebos.com/9213b07eca806538184ec36695dda144ad34821a',
                        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farchive%2F1e93e74fb4b87734fb11bc487f9d7e2e9ce666f2.jpg&refer=http%3A%2F%2Fi0.hdslb.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629028767&t=83072eef6345c4169751cef753b79bd7',
                        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fp.ssl.qhimg.com%2Ft017bbc635928363c05.jpg&refer=http%3A%2F%2Fp.ssl.qhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629274751&t=89d2696d8027df24bb767e6acb5330ac',
                        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Ff.mgame.netease.com%2Fforum%2F201509%2F21%2F171337o26avxzpb6wpowza.gif&refer=http%3A%2F%2Ff.mgame.netease.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1628907951&t=85efd61fe8604d1fb018b1555e23d316',
                    ]
                });
            }
            this.imgPreview.show(index);
        }
    },
}
```

#### ä¸Reactä¸€èµ·ä½¿ç”¨:
```javascript

export default() => {
    // a ref 
    const imgInstance = useRef(null as unknown as ImagePreview);
    useEffect(()=> {
        return () => {
            if (imgInstance.current) {
               // never forget to destroy
                imgInstance.current.destroy();
            }
        }
    }, [])

    const imgs =  [
        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201909%2F30%2F20190930192812_ZdJUw.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629013294&t=0fefdbd28f9926ff195325bd9d2bd4a9',
        'https://iknow-pic.cdn.bcebos.com/9213b07eca806538184ec36695dda144ad34821a',
        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farchive%2F1e93e74fb4b87734fb11bc487f9d7e2e9ce666f2.jpg&refer=http%3A%2F%2Fi0.hdslb.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629028767&t=83072eef6345c4169751cef753b79bd7',
        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fp.ssl.qhimg.com%2Ft017bbc635928363c05.jpg&refer=http%3A%2F%2Fp.ssl.qhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629274751&t=89d2696d8027df24bb767e6acb5330ac',
        'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Ff.mgame.netease.com%2Fforum%2F201509%2F21%2F171337o26avxzpb6wpowza.gif&refer=http%3A%2F%2Ff.mgame.netease.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1628907951&t=85efd61fe8604d1fb018b1555e23d316',
    ];
    function handleClick (index: number) {
        if (!imgInstance.current) {
            imgInstance.current = new ImagePreview({
                imgs,
            })
        }
        imgInstance.current.show(index);
    }

    return (<div>
        {
            imgs.map((src, index) => {
                return (
                    <div key={index} onClick={() =>handleClick(index)}>
                        {index}
                    </div>
                )
            })
        }
    </div>)
}

```


### ä¾‹å­
[click here](https://daxiazilong.github.io/image-preview/index.html) . 

### Api
* `new ImagePreview({imgs?: Array<string|HTMLImageElement>}) ` 
* `new ImagePreview({selector?: string}) ` 
  
   ç”Ÿæˆä¸€ä¸ªimage previewå®ä¾‹.
* `imagePreview.prototype.show(index:number)` 
   æ‰“å¼€ç¬¬indexä¸ªå›¾ç‰‡, index ä» 0å¼€å§‹.

* `imagePreview.prototype.insertImageAfter( image: string | HTMLImageElement , index: number )` 
   åœ¨indexä¹‹åæ’å…¥ä¸€å¼ æ–°å›¾, å¦‚æœ index < 0, æ–°å›¾ä¼šåœ¨0çš„ä½ç½®æ’å…¥. å¦‚æœindexè¶…è¿‡imgsçš„é•¿åº¦ä¼šè¢«æ’å…¥åˆ°æœ€åä¸€ä¸ªä½ç½®.
   * æ³¨æ„: å¦‚æœ å‚æ•°imageæ˜¯HTMLImageElement, å¹¶ä¸”å­˜åœ¨è·¨åŸŸ, ä½ æœ€å¥½è®¾ç½®ä¸€ä¸‹ [crossOrigin](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/crossOrigin) å±æ€§.

* `imagePreview.prototype.delImage(index:number)` 
  åˆ é™¤ç¬¬indexä¸ªå›¾ç‰‡. Index < 0 ä¼šè¢«è®¾ç½®ä¸º 0, è¶…è¿‡imgsçš„é•¿åº¦ä¼šè¢«è®¾ç½®æˆimgsçš„æœ€åä¸€ä¸ªå…ƒç´ çš„index.

* `imagePreview.prototype.destroy()` 
  é”€æ¯ image preview å®ä¾‹. ç§»é™¤å®ƒç”Ÿæˆçš„HTMLå…ƒç´ å’Œå…¶ä»–èµ„æº. ä¸ºäº†æ›´å¥½çš„æ€§èƒ½ä½“éªŒ, ä½ å¯ä»¥æ¥ç€è®¾ç½® imgObj = null;
  
### äº¤æµ
å¦‚å¯¹æ‚¨æœ‰äº›è®¸å¸®åŠ©ï¼Œå¯ä»¥ç»™ä¸€é¢—starå“¦ğŸ˜œ,

åŠ å…¥qqç¾¤977121370ä¸€èµ·å“”å“”å“”.
